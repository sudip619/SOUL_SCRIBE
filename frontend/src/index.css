/* src/index.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- THEME DEFINITIONS --- */
/* This is the new default theme for the login page */
:root {
  --bg-primary: #041021;      /* Solid dark blue */
  --bg-secondary: #0B1A31;    /* Slightly lighter for cards */
  --text-primary: #b9ecfd;     /* Light blue text */
  --text-secondary: #829AB1;   /* Muted secondary text */
  --accent-primary: #38b6ff;   /* Bright blue accent */
  --accent-secondary: #3194cc; /* Deeper blue highlight */
  --border-color: rgba(56, 182, 255, 0.2);
}

.theme-bright {
  --bg-primary: #1a0f00;
  --bg-secondary: #2b1a01;
  --text-primary: #fff2db;
  --text-secondary: #e7c79a;
  --accent-primary: #ffb23a;
  --accent-secondary: #d48206;
  --border-color: rgba(255, 178, 58, 0.25);
}

.theme-calm {
  --bg-primary: #34495E;
  --bg-secondary: #4A6572;
  --text-primary: #ECF0F1;
  --text-secondary: #B0BEC5;
  --accent-primary: #5D9CEC;
  --accent-secondary: #9B59B6;
  --border-color: rgba(93, 156, 236, 0.2);
}

.theme-muted {
  --bg-primary: #2C3E50;
  --bg-secondary: #34495E;
  --text-primary: #BDC3C7;
  --text-secondary: #7F8C8D;
  --accent-primary: #8E44AD;
  --accent-secondary: #2980B9;
  --border-color: rgba(142, 68, 173, 0.2);
}

.theme-grounding {
  --bg-primary: #2F4F4F;
  --bg-secondary: #3E606F;
  --text-primary: #CED4DA;
  --text-secondary: #868E96;
  --accent-primary: #D9534F;
  --accent-secondary: #B8860B;
  --border-color: rgba(217, 83, 79, 0.2);
}

/* Angry/Annoyed theme: derived strictly from #1f0000 and #3d001e */
.theme-angry {
  --bg-primary: #1a0000; /* darker version of #1f0000 */
  --bg-secondary: #2b0011; /* darker mix of #3d001e */
  --text-primary: #ffd6e0; /* light tint of #3d001e for high contrast */
  --text-secondary: #f1a5b6; /* softer tint of #3d001e */
  --accent-primary: #ff3d7a; /* brightened tint of #3d001e */
  --accent-secondary: #b8003b; /* deepened shade of #3d001e */
  --border-color: rgba(255, 61, 122, 0.25); /* from accent-primary */
}


/* --- BASE STYLES --- */
@layer base {
  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
  }
  /* MODIFIED: The default background is now the solid dark blue for the login page */
  body {
    color: var(--text-primary);
    background-color: #041021;
    @apply font-sans;
    transition: background-color 0.5s ease-in-out, color 0.5s ease-in-out;
    overflow-x: hidden;
  }
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
  }
  a {
    color: var(--accent-primary);
    @apply hover:opacity-80 transition-colors duration-300;
  }
}

/* --- NEW STYLES for post-login background and auth page layout --- */

/* Use the same animated gradient for all moods by default when a theme is active */
body.theme-bright,
body.theme-calm,
body.theme-muted,
body.theme-grounding,
body.animated-gradient-bg {
  background: linear-gradient(-45deg, var(--bg-primary), var(--bg-secondary), var(--bg-primary));
  background-size: 400% 400%;
  animation: gradientBG 25s ease infinite;
  background-attachment: fixed;
}

/* Angry: blob-like magenta/purple glow on dark, matching provided reference */
body.theme-angry {
  /* Exact gradient per provided code using CSS variables */
  animation: none !important;
  --color1: #3d001e; /* Top-right magenta */
  --color2: #1f0000; /* Bottom-left purple */
  --bg-color: #000000; /* Deep black */
  background: var(--bg-color) !important;
  background-image: radial-gradient(at 90% 10%, var(--color1) 0px, transparent 55%), radial-gradient(at 10% 90%, var(--color2) 0px, transparent 55%) !important;
  background-repeat: no-repeat !important;
  background-attachment: fixed !important;
}

/* Happy: same radial-gradient layout as angry, with given colors */
body.theme-bright {
  animation: none !important;
  --color1: #744a01;
  --color2: #744a01;
  --bg-color: #000000;
  background: var(--bg-color) !important;
  background-image: radial-gradient(at 90% 10%, var(--color1) 0px, transparent 55%), radial-gradient(at 10% 90%, var(--color2) 0px, transparent 55%) !important;
  background-repeat: no-repeat !important;
  background-attachment: fixed !important;
}


@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Styles for the new two-column auth page layout */
.auth-page-wrapper { width: 100%; }
.auth-page-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 17rem;
  width: 100%;
}

/* Animated Logo Placeholder Card */
.logo-card {
  width: 480px;
  height: 480px;
  background-image: linear-gradient(163deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  border-radius: 20px;
  transition: all .3s;
}
.logo-card-inner {
  width: 100%;
  height: 100%;
  background-color: #0B1A31;
  border-radius: 20px;
  transition: all .2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  font-weight: bold;
  color: var(--text-primary);
  padding: 2rem;
}
.logo-card-inner:hover { transform: scale(0.98); }
.logo-card:hover { box-shadow: 0px 0px 30px 1px var(--accent-primary); }

/* 3D Spline viewer section below the login area (no background container) */
.spline-hero-section {
  width: 100%;
  padding: 0 2rem 4rem;
  margin-top: 6rem;
}
.spline-hero-content {
  display: grid;
  grid-template-columns: 1fr 1.3fr;
  align-items: center;
  gap: 2rem;
}
.spline-info {
  max-width: 720px;
}
.spline-heading {
  font-size: 2rem;
  line-height: 1.2;
  font-weight: 800;
  color: var(--accent-primary);
  margin-bottom: 0.75rem;
}
.spline-description {
  color: var(--text-secondary);
  font-size: 1.05rem;
  line-height: 1.7;
}
.spline-hero-section { overflow: hidden; }
.spline-view { position: relative; overflow: visible; justify-self: end; }
.spline-view spline-viewer {
  display: block;
  width: 100%;
  height: 80vh;
  transform: scale(2) translateX(10%);
  transform-origin: right center;
}
@media (max-width: 1440px) {
  .spline-view spline-viewer { transform: scale(1.8) translateX(8%); }
}
@media (max-width: 1280px) {
  .spline-hero-content { grid-template-columns: 1fr 1fr; }
  .spline-view spline-viewer { transform: scale(1.6) translateX(6%); }
}
@media (max-width: 1024px) {
  .spline-hero-content { grid-template-columns: 1fr; }
  .spline-view spline-viewer { height: 70vh; transform: scale(1.3) translateX(0%); transform-origin: center; }
}
@media (max-width: 640px) {
  .spline-view spline-viewer { height: 60vh; transform: scale(1.1) translateX(0%); }
}


/* --- ALL YOUR EXISTING ANIMATION STYLES --- */
/* (All of your other custom classes for buttons, inputs, etc., are kept below) */
.nav-button {
  font-size: smaller;
  border: none;
  font-weight: bold;
  letter-spacing: 3px;  
  text-transform: uppercase;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: all 500ms;
  color: var(--accent-primary);
  outline: 2px solid var(--accent-primary);
}
.nav-button:hover {
  color: white;
  outline-color: var(--accent-secondary);
  box-shadow: 4px 5px 17px -4px var(--accent-primary);
  transform: scale(1.1);
}
.nav-button::before {
  content: "";
  position: absolute;
  left: -50px;
  top: 0;
  width: 0;
  height: 100%;
  transform: skewX(45deg);
  z-index: -1;
  transition: width 1000ms;
  background-color: var(--accent-primary);
}
.nav-button:hover::before {
  width: 250%;
}
.logout-btn {
  font-size: smaller;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 45px;
  height: 45px;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition-duration: .3s;
  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.199);
  background-color: rgb(255, 65, 65);
}
.logout-btn .sign {
  width: 100%;
  transition-duration: .3s;
  display: flex;
  align-items: center;
  justify-content: center;
}
.logout-btn .sign svg {
  width: 17px;
}
.logout-btn .sign svg path {
  fill: white;
}
.logout-btn .text {
  position: absolute;
  right: 0%;
  width: 0%;
  opacity: 0;
  color: white;
  font-size: 1.2em;
  font-weight: 600;
  transition-duration: .3s;
}
.logout-btn:hover {
  width: 125px;
  border-radius: 40px;
  transition-duration: .3s;
}
.logout-btn:hover .sign {
  width: 30%;
  transition-duration: .3s;
  padding-left: 20px;
}
.logout-btn:hover .text {
  opacity: 1;
  width: 70%;
  transition-duration: .3s;
  padding-right: 10px;
}
.logout-btn:active {
  transform: translate(2px ,2px);
}
.animated-check {
  cursor: pointer;
  position: relative;
  width: 20px;
  height: 20px;
  -webkit-tap-highlight-color: transparent;
}
.animated-check svg {
  position: relative;
  z-index: 1;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke: var(--text-secondary);
  stroke-width: 2;
  transition: all 0.2s ease;
}
.animated-check svg path {
  stroke-dasharray: 60;
  stroke-dashoffset: 0;
}
.animated-check svg polyline {
  stroke-dasharray: 22;
  stroke-dashoffset: 66;
}
.animated-check:hover svg {
  stroke: var(--accent-secondary);
}
input[type="checkbox"]:checked + label .animated-check svg {
  stroke: var(--accent-primary);
}
input[type="checkbox"]:checked + label .animated-check svg path {
  stroke-dashoffset: 60;
  transition: all 0.3s linear;
}
input[type="checkbox"]:checked + label .animated-check svg polyline {
  stroke-dashoffset: 42;
  transition: all 0.2s linear;
  transition-delay: 0.15s;
}
.send-fly-button {
  font-family: inherit;
  font-size: 18px;
  background: var(--accent-primary);
  color: white;
  padding: 0.7em 1em;
  padding-left: 0.9em;
  display: flex;
  align-items: center;
  border: none;
  border-radius: 8px;
  overflow: hidden;
  transition: all 0.2s;
  cursor: pointer;
}
.send-fly-button span {
  display: block;
  margin-left: 0.3em;
  transition: all 0.3s ease-in-out;
}
.send-fly-button svg {
  display: block;
  transform-origin: center center;
  transition: transform 0.3s ease-in-out;
}
.send-fly-button:hover .svg-wrapper {
  animation: fly-1 0.6s ease-in-out infinite alternate;
}
.send-fly-button:hover svg {
  transform: translateX(1.2em) rotate(45deg) scale(1.1);
}
.send-fly-button:hover span {
  transform: translateX(5em);
}
.send-fly-button:active {
  transform: scale(0.95);
}
@keyframes fly-1 {
  from { transform: translateY(0.1em); }
  to { transform: translateY(-0.1em); }
}
.chat-input-card {
  background-image: linear-gradient(163deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  border-radius: 1rem;
  transition: all .4s;
  flex-grow: 1;
}
.chat-input-card:hover {}
.chat-input-card2 {
  background-color: var(--bg-secondary);
  border-radius: 1rem;
  transition: all .2s;
  padding: 3px;
}
.chat-input-card2:hover {
  transform: scale(0.98);
}
.chat-input-group {
  position: relative;
}
.chat-input-field {
  border: solid 1.5px var(--text-secondary);
  border-radius: 0.8rem;
  background: none;
  padding: 1rem;
  width: 100%;
  font-size: 1rem;
  color: var(--text-primary);
  transition: border 150ms cubic-bezier(0.4,0,0.2,1);
}
.chat-input-label {
  position: absolute;
  left: 15px;
  color: var(--text-secondary);
  pointer-events: none;
  transform: translateY(1rem);
  transition: 150ms cubic-bezier(0.4,0,0.2,1);
}
.chat-input-field:focus,
.chat-input-field:not(:placeholder-shown) {
  outline: none;
  border: 1.5px solid var(--accent-primary);
}
.chat-input-field:focus ~ .chat-input-label,
.chat-input-field:not(:placeholder-shown) ~ .chat-input-label {
  transform: translateY(-50%) scale(0.8);
  background-color: var(--bg-secondary);
  padding: 0 .2em;
  color: var(--accent-primary);
}
.auth-form-container {
  width: 350px;
  border-radius: 0.75rem;
  background-color: #0B1A31;
  padding: 2rem;
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}
.auth-title {
  text-align: center;
  font-size: 1.5rem;
  line-height: 2rem;
  font-weight: 700;
  color: var(--accent-primary);
}
.auth-form {
  margin-top: 1.5rem;
}
.auth-input-card {
  background-image: linear-gradient(163deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  
  border-radius: 1rem;
  transition: all .3s;
  margin-top: 1rem;
}
.auth-input-card:hover {
  box-shadow: 0px 0px 30px 1px var(--accent-primary);
}
.auth-input-card2 {
  background-color: #0B1A31;
  border-radius: 1rem;
  transition: all .2s;
  padding: 3px;
}
.auth-input-card2:hover {
  transform: scale(0.98);
}
.auth-input-group {
  position: relative;
}
.auth-input-field {
  width: 100%;
  border: solid 1.5px var(--text-secondary);
  border-radius: 0.8rem;
  background: none;
  padding: 1rem;
  font-size: 1rem;
  color: var(--text-primary);
  transition: border 150ms cubic-bezier(0.4,0,0.2,1), box-shadow .4s;
}
.auth-input-label {
  position: absolute;
  left: 15px;
  color: var(--text-secondary);
  pointer-events: none;
  transform: translateY(1rem);
  transition: 150ms cubic-bezier(0.4,0,0.2,1);
}
.auth-input-field:focus,
.auth-input-field:not(:placeholder-shown) {
  outline: none;
  border: 1.5px solid var(--accent-secondary);
  box-shadow: 0 0 0 .15vw var(--accent-secondary);
}
.auth-input-field:focus ~ .auth-input-label,
.auth-input-field:not(:placeholder-shown) ~ .auth-input-label {
  transform: translateY(-50%) scale(0.8);
  background-color: var(--bg-primary);
  padding: 0 .2em;
  color: var(--accent-secondary);
}
.auth-submit-button {
  display: block;
  width: 100%;
  background-color: var(--accent-primary);
  padding: 0.75rem;
  text-align: center;
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 600;
  margin-top: 1.5rem;
  transition: background-color 0.3s;
}
.auth-submit-button:hover {
  background-color: var(--accent-secondary);
}
.auth-toggle-link {
  text-align: center;
  font-size: 0.875rem;
  line-height: 1rem;
  color: var(--text-secondary);
  margin-top: 1rem;
}
.auth-toggle-link a {
  color: var(--text-primary);
  text-decoration: none;
}
.auth-toggle-link a:hover {
  text-decoration: underline;
  color: var(--accent-secondary);
}
.c-button {
  color: #000;
  font-weight: 700;
  font-size: 16px;
  text-decoration: none;
  padding: 0.9em 1.6em;
  cursor: pointer;
  display: inline-block;
  vertical-align: middle;
  position: relative;
  z-index: 1;
}
.c-button--gooey {
  color: var(--accent-primary);
  text-transform: uppercase;
  letter-spacing: 2px;
  border: 4px solid var(--accent-primary);
  border-radius: 0.75rem;
  position: relative;
  transition: all 700ms ease;
  width: 100%;
  margin-top: 1.5rem;
}
.c-button--gooey .c-button__blobs {
  height: 100%;
  filter: url(#goo);
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  bottom: -3px;
  right: -1px;
  z-index: -1;
}
.c-button--gooey .c-button__blobs div {
  background-color: var(--accent-primary);
  width: 34%;
  height: 100%;
  border-radius: 100%;
  position: absolute;
  transform: scale(1.4) translateY(125%) translateZ(0);
  transition: all 700ms ease;
}
.c-button--gooey .c-button__blobs div:nth-child(1) {
  left: -5%;
}
.c-button--gooey .c-button__blobs div:nth-child(2) {
  left: 30%;
  transition-delay: 60ms;
}
.c-button--gooey .c-button__blobs div:nth-child(3) {
  left: 66%;
  transition-delay: 25ms;
}
.c-button--gooey:hover {
  color: white;
}
.c-button--gooey:hover .c-button__blobs div {
  transform: scale(1.4) translateY(0) translateZ(0);
}
.loading-screen {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #0B1A31;
  z-index: 100;
}
.loading-svg {
  width: 80%;
  max-width: 400px;
  height: auto;
}
.loading-text {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 50px;
  stroke: url(#soulscribe-gradient);
  stroke-width: 2;
  fill: transparent;
  stroke-dasharray: 1200;
  stroke-dashoffset: 1200;
  animation: draw-text 2s ease-in-out forwards;
}
.loading-screen .gradient-start {
  stop-color: var(--accent-primary);
}
.loading-screen .gradient-end {
  stop-color: var(--accent-secondary);
}
@keyframes draw-text {
  to {
    stroke-dashoffset: 0;
  }
}

/* --- NEW: Pulsing Ring Loader Animation --- */
.pl {
  width: 3em;
  height: 3em;
  margin-top: -0.75rem; /* Adds space below the SOULSCRIBE text */
}

.pl__ring {
  animation: ringA 2s linear infinite;
  fill: none;
  stroke-linecap: round;
}

/* These classes use the theme's accent colors */
.pl__ring--a {
  stroke: var(--accent-primary);
}
.pl__ring--b {
  animation-name: ringB;
  stroke: var(--accent-secondary);
}
.pl__ring--c {
  animation-name: ringC;
  stroke: var(--accent-primary);
}
.pl__ring--d {
  animation-name: ringD;
  stroke: var(--accent-secondary);
}

/* Animations (no changes to the keyframes) */
@keyframes ringA {
  from, 4% { stroke-dasharray: 0 660; stroke-width: 20; stroke-dashoffset: -330; }
  12% { stroke-dasharray: 60 600; stroke-width: 30; stroke-dashoffset: -335; }
  32% { stroke-dasharray: 60 600; stroke-width: 30; stroke-dashoffset: -595; }
  40%, 54% { stroke-dasharray: 0 660; stroke-width: 20; stroke-dashoffset: -660; }
  62% { stroke-dasharray: 60 600; stroke-width: 30; stroke-dashoffset: -665; }
  82% { stroke-dasharray: 60 600; stroke-width: 30; stroke-dashoffset: -925; }
  90%, to { stroke-dasharray: 0 660; stroke-width: 20; stroke-dashoffset: -990; }
}
@keyframes ringB {
  from, 12% { stroke-dasharray: 0 220; stroke-width: 20; stroke-dashoffset: -110; }
  20% { stroke-dasharray: 20 200; stroke-width: 30; stroke-dashoffset: -115; }
  40% { stroke-dasharray: 20 200; stroke-width: 30; stroke-dashoffset: -195; }
  48%, 62% { stroke-dasharray: 0 220; stroke-width: 20; stroke-dashoffset: -220; }
  70% { stroke-dasharray: 20 200; stroke-width: 30; stroke-dashoffset: -225; }
  90% { stroke-dasharray: 20 200; stroke-width: 30; stroke-dashoffset: -305; }
  98%, to { stroke-dasharray: 0 220; stroke-width: 20; stroke-dashoffset: -330; }
}
@keyframes ringC {
  from { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: 0; }
  8% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -5; }
  28% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -175; }
  36%, 58% { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: -220; }
  66% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -225; }
  86% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -395; }
  94%, to { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: -440; }
}
@keyframes ringD {
  from, 8% { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: 0; }
  16% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -5; }
  36% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -175; }
  44%, 50% { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: -220; }
  58% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -225; }
  78% { stroke-dasharray: 40 400; stroke-width: 30; stroke-dashoffset: -395; }
  86%, to { stroke-dasharray: 0 440; stroke-width: 20; stroke-dashoffset: -440; }
}

/* App shell with animated sidebar */
.app-shell {
  position: relative;
  display: flex;
  align-items: flex-start;
  width: 100%;
  padding-left: 88px; /* reserve space for collapsed sidebar so content never shifts */
}
.app-content { flex: 1; display: flex; justify-content: center; }
.sidebar {
  position: fixed;
  left: 24px;
  top: 96px; /* sits below header */
  height: calc(100vh - 128px);
  width: 64px;
  background:
    linear-gradient(135deg,
      color-mix(in srgb, var(--bg-secondary) 45%, transparent) 0%,
      color-mix(in srgb, var(--bg-primary) 35%, transparent) 100%);
  backdrop-filter: blur(16px) saturate(120%);
  -webkit-backdrop-filter: blur(16px) saturate(120%);
  border: 1px solid color-mix(in srgb, var(--accent-primary) 28%, transparent);
  border-radius: 16px;
  background-clip: padding-box;
  overflow: hidden;
  will-change: width, transform;
  transition: width .45s ease, box-shadow .45s ease, transform .45s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 6px 24px rgba(0,0,0,0.35);
  z-index: 50;
}
.sidebar.is-open { width: 244px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 12px 28px rgba(0,0,0,0.45); }
.sidebar::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04) 45%, rgba(255,255,255,0.02) 70%, rgba(255,255,255,0));
}
.sidebar.play-bounce { animation: sidebar-bounce .6s ease-out 1; }
.sidebar-inner { display: flex; flex-direction: column; padding: .75rem; gap: .5rem; height: 100%; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none; position: relative; }
.sidebar-inner::-webkit-scrollbar { width: 0; height: 0; }
.sidebar-item {
  display: flex;
  align-items: center;
  gap: .75rem;
  color: var(--text-primary);
  background: transparent;
  border: none;
  text-align: left;
  padding: .6rem .75rem;
  border-radius: 12px;
  cursor: pointer;
  transition: background .3s ease, transform .3s ease;
}
.sidebar-item:hover, .sidebar-item.is-active { background: rgba(56, 182, 255, 0.12); transform: translateX(2px); }
body.theme-angry .sidebar-item:hover, body.theme-angry .sidebar-item.is-active { background: #180202; box-shadow: inset 0 0 0 1px #2a0000; }
.sidebar-icon { display: inline-flex; color: var(--accent-primary); }
.sidebar-label { opacity: 0; transform: translateX(-6px); transition: opacity .35s ease, transform .35s ease; white-space: nowrap; }
.sidebar.is-open .sidebar-label { opacity: 1; transform: translateX(0); }

@keyframes sidebar-bounce {
  0% { transform: translateX(0) scaleX(1); }
  60% { transform: translateX(3px) scaleX(1.03); }
  100% { transform: translateX(0) scaleX(1); }
}

/* Expanding Card Stack (below chat) */
.card-stack-section {
  width: 100%;
  padding: 4rem 2rem 6rem;
  overflow: hidden;
}
.card-stack-rows { display: block; }
.card-stack-row {
  display: flex;
  flex-wrap: nowrap;
  gap: 1rem;
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
}
.card-stack-item {
  position: relative;
  height: 420px;
  border-radius: 20px;
  background-image: linear-gradient(163deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  border: 1px solid var(--border-color);
  overflow: hidden;
  flex-grow: .4;
  flex-basis: 0;
  transition: flex-grow .45s ease;
}
/* Angry card uses same palette as others */
.card-stack-item.emotion-angry {
  background-image: linear-gradient(163deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  border-color: var(--border-color);
}
.card-stack-row:hover .card-stack-item:not(:hover) { flex-grow: .3; }
.card-stack-item:hover {
  flex-grow: 5.5;
}
.card-vertical {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  color: rgba(255,255,255,.9);
  font-weight: 700;
  letter-spacing: .5px;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
}
.card-index { opacity: .9; font-size: 1.2rem; }
.card-name { opacity: .9; font-size: 1rem; }

.card-details {
  position: absolute;
  inset: 0;
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity .35s ease .1s, transform .35s ease .1s;
  color: var(--text-primary);
}
.card-stack-item:hover .card-details {
  opacity: 1;
  transform: translateY(0);
}
.card-stack-item:hover .card-vertical { opacity: 0; }

.card-details-title { font-size: 1.25rem; font-weight: 800; margin-bottom: .5rem; color: #fff; }
.card-details-text { color: #e6f7ff; line-height: 1.6; }

@media (max-width: 1024px) {
  .card-stack-item { height: 360px; }
  .card-stack-item:hover { flex-grow: 4; }
}
@media (max-width: 640px) {
  .card-stack-row { gap: .6rem; }
  .card-stack-item { height: 300px; }
  .card-stack-item:hover { flex-grow: 3; }
  .card-details-title { font-size: 1.1rem; }
}
